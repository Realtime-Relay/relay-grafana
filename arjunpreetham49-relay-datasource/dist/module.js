/* [create-plugin] version: 5.12.2 */
define(["@grafana/data","@grafana/runtime","@grafana/ui","module","react","rxjs"],((e,t,r,n,o,a)=>(()=>{"use strict";var c={781:t=>{t.exports=e},531:e=>{e.exports=t},7:e=>{e.exports=r},308:e=>{e.exports=n},959:e=>{e.exports=o},269:e=>{e.exports=a}},i={};function l(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}};return c[e](r,r.exports,l),r.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var r in t)l.o(t,r)&&!l.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.p="public/plugins/arjunpreetham49-relay-datasource/";var u={};l.r(u),l.d(u,{plugin:()=>J});var p=l(308),s=l.n(p);l.p=s()&&s().uri?s().uri.slice(0,s().uri.lastIndexOf("/")+1):"public/plugins/arjunpreetham49-relay-datasource/";var y=l(781),b=l(531),f=l(269);const O={topic:"",start_time:"${__from:date:iso}"};function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){d(e,t,r[t])}))}return e}function j(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}class m extends b.DataSourceWithBackend{getDefaultQuery(e){return O}applyTemplateVariables(e,t){var r=(0,b.getTemplateSrv)().replace("${__from:date:iso}",t),n=(0,b.getTemplateSrv)().replace(e.topic,t);const o=new Date(r);var a=Math.floor(o.getTime()/1e3);return j(g({},e),{topic:n,start_time:r,path:a})}filterQuery(e){return!0}query(e){const t=e.targets.map(((t,r)=>{const n=this.applyTemplateVariables(t,e.scopedVars);return(0,b.getGrafanaLiveSrv)().getDataStream({addr:{scope:y.LiveChannelScope.DataSource,namespace:this.uid,path:n.path,data:g({},n)}})}));return(0,f.merge)(...t)}constructor(e){super(e)}}var v=l(959),P=l.n(v),h=l(7);function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){w(e,t,r[t])}))}return e}function D(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){E(e,t,r[t])}))}return e}function I(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const J=new y.DataSourcePlugin(m).setConfigEditor((function(e){const{onOptionsChange:t,options:r}=e,{jsonData:n,secureJsonFields:o,secureJsonData:a}=r;return P().createElement(P().Fragment,null,P().createElement(h.InlineField,{label:"Path",labelWidth:14,interactive:!0,tooltip:"Relay Service URL"},P().createElement(h.Input,{id:"config-editor-path",onChange:e=>{t(D(S({},r),{jsonData:D(S({},n),{path:e.target.value})}))},value:n.path,placeholder:"Server endpoint",width:40})),P().createElement(h.InlineField,{label:"API Key",labelWidth:14,interactive:!0,tooltip:"Project API Key"},P().createElement(h.SecretInput,{required:!0,id:"config-editor-api-key",isConfigured:o.apiKey,value:null==a?void 0:a.apiKey,placeholder:"Enter your API key",width:40,onReset:()=>{t(D(S({},r),{secureJsonFields:D(S({},r.secureJsonFields),{apiKey:!1}),secureJsonData:D(S({},r.secureJsonData),{apiKey:""})}))},onChange:e=>{t(D(S({},r),{secureJsonData:{apiKey:e.target.value}}))}})),P().createElement(h.InlineField,{label:"Secret",labelWidth:14,interactive:!0,tooltip:"Project Secret"},P().createElement(h.SecretInput,{id:"config-editor-secret-key",onChange:e=>{t(D(S({},r),{secureJsonData:D(S({},n),{secretKey:e.target.value})}))},value:null==a?void 0:a.secretKey,isConfigured:o.secretKey,onReset:()=>{t(D(S({},r),{secureJsonFields:D(S({},r.secureJsonFields),{secretKey:!1}),secureJsonData:D(S({},r.secureJsonData),{secretKey:""})}))},placeholder:"Enter Secret",width:40})))})).setQueryEditor((function({query:e,onChange:t,onRunQuery:r}){return P().createElement(h.Stack,{gap:0},P().createElement(h.InlineField,{label:"Topic",labelWidth:16,tooltip:"Enter topic to listen from"},P().createElement(h.Input,{id:"query-topic",onChange:r=>{t(I(x({},e),{topic:r.target.value}))},value:e.topic||"",onBlur:r,placeholder:"Enter a topic"})))}));return u})()));
//# sourceMappingURL=module.js.map